<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bloggg</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <link rel="stylesheet" th:href="@{style.css}">

</head>

<body>
<!-- -->
<div th:insert="fragments/navbar :: navbar"></div>

<!-- HERO -->
<section class="hero text-center mt-5">
    <div class="container">
        <h1>Write. Read. Connect.</h1>
        <p class="lead mt-3">
            A next-gen blogging platform for writers and Authors.
        </p>
    </div>
</section>

<!-- MAIN -->
<div class="container my-5">
    <div class="row">

        <!-- BLOG LIST -->
        <div class="col-lg-8">

            <!-- FEATURED -->
            <div class="blog-card p-4 mb-4" th:if="${featuredBlogs != null}">
                <span class="badge badge-featured mb-2">FEATURED</span>
                <h3 class="gradient-text" th:text="${featuredBlogs.title}"></h3>
                <p  th:utext="${featuredBlogs.summary}"></p>
                <a th:href="@{/article/{slug}(slug=${featuredBlogs.slug})}"
                   class="btn btn-read btn-sm">
                    Read Article →
                </a>
            </div>

            <!-- ALL BLOGS -->
            <div th:each="blog : ${blogs}" class="blog-card p-4 mb-3">
                <div class="blog-row">

    <!-- LEFT CONTENT -->
    <div class="blog-content">
		<h3 class="small gradient-text mb-2" th:text="${blog.title}"></h3>
        <p class="small text-muted">
            <span th:text="${blog.author.username}"></span>
            ·
            <span th:text="${#dates.format(blog.publishedAt,'dd MMM yyyy')}"></span>
        </p>

<p class="blog-summary"
   th:utext="${blog.summary}">
</p>
<!-- 

   <a th:href="@{/article/{id}(id=${blog.id})}" class="fw-semibold" style="color: #4cc9f0">
            Continue reading →
        </a>


 -->
     
           <a th:href="@{/article/{slug}(slug=${blog.slug})}" class="fw-semibold" style="color: #4cc9f0">
            Continue reading →
        </a>
    </div>

    <!-- RIGHT IMAGE -->
    <img th:if="${blog.imageUrl != null}"
         th:src="@{/img/{file}(file=${blog.imageUrl})}"
         class="blog-thumb"
         alt="Article image">

</div>

            </div>


<div th:if="${totalPages > 1}" class="d-flex justify-content-between align-items-center mt-5 mb-5">
                <div>
                    <a th:if="${!isFirst}" th:href="@{/(page=${currentPage - 1})}" 
                       class="btn btn-outline-info btn-sm rounded-pill px-4 shadow-sm">
                       &larr; Newer
                    </a>
                </div>

                <div class="text-muted small fw-bold" style="letter-spacing: 1px;">
                    <span th:text="${currentPage + 1}">1</span> / <span th:text="${totalPages}">1</span>
                </div>

                <div>
                    <a th:if="${!isLast}" th:href="@{/(page=${currentPage + 1})}" 
                       class="btn btn-outline-info btn-sm rounded-pill px-4 shadow-sm">
                       Older &rarr;
                    </a>
                </div>
            </div>
            
        </div>

        <!-- SIDEBAR -->
        <div class="col-lg-4">
            <div class="sidebar-card p-4 mb-4">
                <h5>Recent Uploads</h5>
                <ul class="list-unstyled">
                    <li th:each="rb : ${recentBlogs}" class="mb-2">
                        <a th:href="@{/article/{slug}(slug=${rb.slug})}"
                           th:text="${rb.title}"></a>
                    </li>
                </ul>
            </div>

            <div class="sidebar-card p-4 text-center">
                <h6>Become an Author</h6>
                <p class="text-muted small">Share real-world knowledge.</p>
                <a th:href="@{/user/article/new}" class="btn btn-read btn-sm">Start Writing</a>
            </div>
        </div>

    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
